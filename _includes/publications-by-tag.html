{%- comment -%}
Include to render publications filtered by a specific tag.

Parameters:
 - tag: the tag to filter by (required)
 - reversed: true|false
 - start: integer (optional) - the start attribute to pass to the <ol>
 - title: optional string - render an <h3> above the list
{%- endcomment -%}

{%- assign tag = include.tag -%}
{%- assign reversed = include.reversed | default: false -%}
{%- assign start_attr = include.start | default: 1 -%}
{%- assign title = include.title | default: "" -%}

{%- if include.title -%}
  <h3>{{ include.title }}</h3>
{%- endif -%}

{%- capture ol_attrs -%}
{%- if reversed == true or reversed == "true" -%} reversed {%- endif -%}
{%- if start_attr and start_attr != 0 -%} start="{{ start_attr }}"{%- endif -%}
{%- endcapture -%}

<div class="container">
  <ol{% if ol_attrs != "" %} {{ ol_attrs }}{% endif %}>
    {% for pub in site.data.publications %}
      {% if pub.tags and pub.tags contains tag %}
        <li>
          {{ pub.authors }}, <em>{{ pub.title }},</em>
          {% if pub.tags contains "published" %}
            <em>{{ pub.journal }},</em> <strong>{{pub.volume}}</strong>,
            {{ pub.page }} ({{ pub.year }})
          {% elsif pub.tags contains "submitted" %}
            <em>Submitted to {{ pub.journal }}</em> ({{ pub.year }})
          {% elsif pub.tags contains "proceedings" %}
            <em>Contribution to {{ pub.proceedings }}</em> ({{ pub.year }})
          {% endif %}
          {% if pub.url %}
            <br>Link: <a href="{{ pub.url }}" target="_blank" rel="noopener">{{ pub.url }}</a>
          {% endif %}
          {% if pub.arxiv %}
            <br>arXiv: <a href="https://arxiv.org/abs/{{ pub.arxiv }}">{{ pub.arxiv }}</a>
          {% endif %}
        </li>
      {% endif %}
    {% endfor %}
  </ol>
</div>