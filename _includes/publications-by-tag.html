{%- comment -%}
Include to render publications filtered by a specific tag.

Parameters:
 - tag: the tag to filter by (required)
 - numbered: true|false (render an <ol> instead of <ul>)
 - reversed: true|false (if numbered, add the reversed attribute)
 - start: integer (optional) - the start attribute to pass to the <ol>
 - title: optional string - render an <h3> above the list
{%- endcomment -%}

{%- assign tag = include.tag -%}
{%- assign numbered = include.numbered | default: false -%}
{%- assign reversed = include.reversed | default: false -%}
{%- assign start_attr = include.start | default: 1 -%}
{%- assign title = include.title | default: "" -%}

{%- if include.title -%}
  <h3>{{ include.title }}</h3>
{%- endif -%}

{%- capture ol_attrs -%}
{%- if reversed == true or reversed == "true" -%} reversed{%- endif -%}
{%- if start_attr and start_attr != 0 -%} start="{{ start_attr }}"{%- endif -%}
{%- endcapture -%}

<ol{{ ol_attrs }}>
<div class="container">
  {% for pub in site.data.publications %}
  {% if pub.tags and pub.tags contains tag %}
  <li>
    {{ pub.authors }}, <em>{{ pub.title }},</em>
    {% if pub.tags contains "published" %}
        <em>{{ pub.journal }},</em> <strong>{{pub.volume}}</strong>,
        {{ pub.page }} ({{ pub.year }})
  {% elsif pub.tags contains "submitted" %}
    <em>Submitted to {{ pub.journal }}</em> ({{ pub.year }})
  {% elsif pub.tags contains "proceedings" %}
    <em>Contribution to {{ pub.proceedings }}</em> ({{ pub.year }})
    {% endif %}
    {% if pub.url %}Link: <a href="{{ pub.url }}" target="_blank" rel="noopener">{{ pub.url }}</a><br>{% endif %}
    {% if pub.arxiv %}
    , arXiv: <a href="https://arxiv.org/abs/{{ pub.arxiv }}">arXiv:{{ pub.arxiv }}</a><br>
    {% else %}
    .
    {% endif %}
  </li>
  {% endif %}
  {% endfor %}
</div>